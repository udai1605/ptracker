"use strict";(self.webpackChunkpartimetracker=self.webpackChunkpartimetracker||[]).push([[960],{585:(e,s,a)=>{a.d(s,{o:()=>d});var l=a(5043),r=a(7356),t=a(579);const i=l.forwardRef(((e,s)=>{let{className:a,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})}));i.displayName="Input";const d=e=>{let{form:s,field:a,...l}=e;const{name:r,value:d=""}=a,{handleChange:n,handleBlur:o}=s,{label:c,required:m,multiline:u,placeholder:p,type:h,size:x="small",fullWidth:w=!0,helperText:f,error:v,className:j,disabled:y,inputProps:b}=l;return(0,t.jsx)(i,{id:r,name:r,value:d,label:c,error:!!v,className:j,helperText:v||f,required:m,multiline:u,rows:u&&3,placeholder:p,type:h,fullWidth:w,disabled:y,variant:"outlined",onChange:n,onBlur:o,InputProps:b})}},1438:(e,s,a)=>{a.d(s,{J:()=>o});var l=a(5043),r=a(2367),t=a(435),i=a(7356),d=a(579);const n=(0,t.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef(((e,s)=>{let{className:a,...l}=e;return(0,d.jsx)(r.b,{ref:s,className:(0,i.cn)(n(),a),...l})}));o.displayName=r.b.displayName},3960:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var l=a(5043),r=a(1438),t=a(5650),i=a(5475),d=a(3892),n=a(899),o=a(585),c=a(579);const m=e=>{const s={email:"",otp:"",password:"",confirm_password:""},a=n.Ik().shape({password:n.Yj().required("New password is required"),confirm_password:n.Yj().oneOf([n.KR("password"),null],"Passwords must match").required("Confirm password is required")});return(0,c.jsxs)("div",{className:"container mx-auto px-4 h-full",children:[(0,c.jsx)("div",{className:"flex content-center items-center justify-center h-full",children:(0,c.jsx)("div",{className:"w-full lg:w-4/12 px-4",children:(0,c.jsx)("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0",children:(0,c.jsxs)("div",{className:"rounded-t mb-0 px-6 py-6",children:[1===e.step&&(0,c.jsx)(d.l1,{initialValues:s,onSubmit:(s,a)=>{let{setFieldValue:l}=a;e.handleEmailSubmit(s)},children:e=>{let{values:s,setFieldValue:a,touched:l,errors:n}=e;return(0,c.jsx)(d.lV,{children:(0,c.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,c.jsxs)("div",{className:"space-y-2 text-center",children:[(0,c.jsx)("div",{className:"mx-auto h-8 w-auto"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold",children:"Forget Password"}),(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter your email to continue"})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(r.J,{htmlFor:"email",children:"Email"}),(0,c.jsx)(d.D0,{name:"email",value:"".concat(s.email),label:"Email/Username",placeholder:"Enter Email/Username",required:!0,component:o.o,autoComplete:"email",fullWidth:!0})]}),(0,c.jsx)("div",{className:"space-y-2",children:(0,c.jsx)(t.$,{className:"w-full",type:"submit",children:"Send OTP"})}),(0,c.jsx)("div",{className:"space-y-2 w-full",children:(0,c.jsx)(i.N_,{className:"text-blue-500",to:"/login",children:"Remeber password? Sign In"})})]})]})})}}),2===e.step&&(0,c.jsx)(d.l1,{initialValues:s,validationSchema:a,onSubmit:async(s,l)=>{let{setFieldValue:r}=l;const{password:t,confirm_password:i}=s;await a.validate({password:t,confirm_password:i}),e.handleOtpSubmit(s)},children:e=>{let{values:s,setFieldValue:a,touched:l,errors:i}=e;return(0,c.jsx)(d.lV,{children:(0,c.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,c.jsxs)("div",{className:"space-y-2 text-center",children:[(0,c.jsx)("div",{className:"mx-auto h-8 w-auto"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold",children:"Forget Password"}),(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter OTP and new password"})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(r.J,{htmlFor:"email",children:"OTP"}),(0,c.jsx)(d.D0,{name:"otp",value:"".concat(s.otp),label:"OTP",placeholder:"enter OTP",required:!0,type:"password",component:o.o,autoComplete:"otp",fullWidth:!0})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(r.J,{htmlFor:"email",children:"New Password"}),(0,c.jsx)(d.D0,{name:"password",value:"".concat(s.password),label:"New Password",placeholder:"enter New Password",required:!0,type:"password",component:o.o,autoComplete:"password",fullWidth:!0})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(r.J,{htmlFor:"email",children:"Confirm Password"}),(0,c.jsx)(d.D0,{name:"confirm_password",value:"".concat(s.confirm_password),label:"Confirm Password",placeholder:"enter Confirm Password",type:"password",required:!0,component:o.o,autoComplete:"password",fullWidth:!0})]}),(0,c.jsx)("div",{className:"space-y-2",children:(0,c.jsx)(t.$,{className:"w-full",type:"submit",children:"  Update Password"})})]})]})})}})]})})})})," "]})};var u=a(3003),p=a(3216),h=a(8771),x=a(6987);const w=(0,u.Ng)((function(e){return{userData:e.LoginReducer}}),(function(e){return{initiateResetPassword:s=>e((0,h.EJ)(s)),verifyOtpAndResetPassword:s=>e((0,h.mC)(s))}}))((e=>{const s=(0,p.Zp)(),[a,r]=(0,l.useState)(1),{enqueueSnackbar:t}=(0,x.dh)();return(0,c.jsx)(m,{userData:e.userData,step:a,handleEmailSubmit:async s=>{if(null!=s)try{await e.initiateResetPassword(s),localStorage.setItem("email",JSON.stringify(s.email)),t("OTP sent",{variant:"success"}),r(2)}catch(a){console.log(a),t(a,{variant:"error"})}},handleOtpSubmit:async a=>{if(null!=a)try{let l={email:JSON.parse(localStorage.getItem("email")),otp:a.otp,newPassword:a.password};await e.verifyOtpAndResetPassword(l),localStorage.removeItem("email"),t("Password Changed Successfully",{variant:"success"}),s("/login")}catch(l){console.log(l),t(l,{variant:"error"})}}})}))}}]);
//# sourceMappingURL=960.e2a67ddc.chunk.js.map