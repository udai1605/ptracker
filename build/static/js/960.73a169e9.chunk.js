"use strict";(self.webpackChunkpartimetracker=self.webpackChunkpartimetracker||[]).push([[960],{585:(e,a,s)=>{s.d(a,{o:()=>n});var r=s(5043),t=s(921),l=s(579);const i=r.forwardRef(((e,a)=>{let{className:s,type:r,...i}=e;return(0,l.jsx)("input",{type:r,className:(0,t.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})}));i.displayName="Input";const n=e=>{let{form:a,field:s,...r}=e;const{name:t,value:n=""}=s,{handleChange:o,handleBlur:d}=a,{label:c,required:p,multiline:u,placeholder:m,type:h,size:w="small",fullWidth:f=!0,helperText:y,error:x,className:v,disabled:j,inputProps:b}=r;return(0,l.jsx)(i,{id:t,name:t,value:n,label:c,error:!!x,className:v,helperText:x||y,required:p,multiline:u,rows:u&&3,placeholder:m,type:h,fullWidth:f,disabled:j,variant:"outlined",onChange:o,onBlur:d,InputProps:b})}},1438:(e,a,s)=>{s.d(a,{J:()=>d});var r=s(5043),t=s(2367),l=s(435),i=s(921),n=s(579);const o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(((e,a)=>{let{className:s,...r}=e;return(0,n.jsx)(t.b,{ref:a,className:(0,i.cn)(o(),s),...r})}));d.displayName=t.b.displayName},3960:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(5043),t=s(1438),l=s(5650),i=s(5475),n=s(3892),o=s(899),d=s(585),c=s(579);const p=e=>{const a={email:"",otp:"",password:"",confirm_password:""},s=o.Ik().shape({password:o.Yj().required("New password is required"),confirm_password:o.Yj().oneOf([o.KR("password"),null],"Passwords must match").required("Confirm password is required")});return(0,c.jsxs)("div",{className:"container mx-auto px-4 h-full",children:[(0,c.jsx)("div",{className:"flex content-center items-center justify-center h-full",children:(0,c.jsx)("div",{className:"w-full lg:w-4/12 px-4",children:(0,c.jsx)("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0",children:(0,c.jsxs)("div",{className:"rounded-t mb-0 px-6 py-6",children:[1===e.step&&(0,c.jsx)(n.l1,{initialValues:a,onSubmit:(a,s)=>{let{setFieldValue:r}=s;e.handleEmailSubmit(a)},children:e=>{let{values:a,setFieldValue:s,touched:r,errors:o}=e;return(0,c.jsx)(n.lV,{children:(0,c.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,c.jsxs)("div",{className:"space-y-2 text-center",children:[(0,c.jsx)("div",{className:"mx-auto h-8 w-auto"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold",children:"Forget Password"}),(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter your email to continue"})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(t.J,{htmlFor:"email",children:"Email"}),(0,c.jsx)(n.D0,{name:"email",value:"".concat(a.email),label:"Email/Username",placeholder:"Enter Email/Username",required:!0,component:d.o,autoComplete:"email",fullWidth:!0})]}),(0,c.jsx)("div",{className:"space-y-2",children:(0,c.jsx)(l.$,{className:"w-full",type:"submit",children:"Send OTP"})}),(0,c.jsx)("div",{className:"space-y-2 w-full",children:(0,c.jsx)(i.N_,{className:"text-blue-500",to:"/login",children:"Remeber password? Sign In"})})]})]})})}}),2===e.step&&(0,c.jsx)(n.l1,{initialValues:a,validationSchema:s,onSubmit:async(a,r)=>{let{setFieldValue:t}=r;const{password:l,confirm_password:i}=a;await s.validate({password:l,confirm_password:i}),e.handleOtpSubmit(a)},children:e=>{let{values:a,setFieldValue:s,touched:r,errors:i}=e;return(0,c.jsx)(n.lV,{children:(0,c.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,c.jsxs)("div",{className:"space-y-2 text-center",children:[(0,c.jsx)("div",{className:"mx-auto h-8 w-auto"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold",children:"Forget Password"}),(0,c.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter OTP and new password"})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(t.J,{htmlFor:"email",children:"OTP"}),(0,c.jsx)(n.D0,{name:"otp",value:"".concat(a.otp),label:"OTP",placeholder:"enter OTP",required:!0,type:"password",component:d.o,autoComplete:"otp",fullWidth:!0})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(t.J,{htmlFor:"email",children:"New Password"}),(0,c.jsx)(n.D0,{name:"password",value:"".concat(a.password),label:"New Password",placeholder:"enter New Password",required:!0,type:"password",component:d.o,autoComplete:"password",fullWidth:!0})]}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsx)(t.J,{htmlFor:"email",children:"Confirm Password"}),(0,c.jsx)(n.D0,{name:"confirm_password",value:"".concat(a.confirm_password),label:"Confirm Password",placeholder:"enter Confirm Password",type:"password",required:!0,component:d.o,autoComplete:"password",fullWidth:!0})]}),(0,c.jsx)("div",{className:"space-y-2",children:(0,c.jsx)(l.$,{className:"w-full",type:"submit",children:"  Update Password"})})]})]})})}})]})})})})," "]})};var u=s(3003),m=s(3216),h=s(8771),w=s(6987);const f=(0,u.Ng)((function(e){return{userData:e.LoginReducer}}),(function(e){return{initiateResetPassword:a=>e((0,h.EJ)(a)),verifyOtpAndResetPassword:a=>e((0,h.mC)(a))}}))((e=>{const a=(0,m.Zp)(),[s,t]=(0,r.useState)(1),{enqueueSnackbar:l}=(0,w.dh)();return(0,c.jsx)(p,{userData:e.userData,step:s,handleEmailSubmit:async a=>{if(null!=a)try{await e.initiateResetPassword(a),localStorage.setItem("email",JSON.stringify(a.email)),l("OTP sent",{variant:"success"}),t(2)}catch(s){console.log(s),l(s,{variant:"error"})}},handleOtpSubmit:async s=>{if(null!=s)try{let r={email:JSON.parse(localStorage.getItem("email")),otp:s.otp,newPassword:s.password};await e.verifyOtpAndResetPassword(r),localStorage.removeItem("email"),l("Password Changed Successfully",{variant:"success"}),a("/login")}catch(r){console.log(r),l(r,{variant:"error"})}}})}))},8771:(e,a,s)=>{s.d(a,{$u:()=>i,EJ:()=>n,DY:()=>d,k9:()=>c,mC:()=>o});var r=s(9217),t=s(7154);const l={signUp:e=>{if(void 0!==e){let a=r.aD+"/api/user/signup";return t.A.post(a,e)}},signIn:e=>{if(void 0!==e){let a=r.aD+"/api/user/signin";return t.A.post(a,e)}},initiateResetPassword:e=>{if(void 0!==e){let a=r.aD+"/api/user/initiate-reset-password";return t.A.post(a,e)}},verifyOtpAndResetPassword:e=>{if(void 0!==e){let a=r.aD+"/api/user/verify-otp-reset-password";return t.A.post(a,e)}}};function i(e){return async a=>{a({type:r.p7});try{const s=await l.signIn(e);return a({type:r.fc,payload:s.data}),s.data}catch(s){throw a({type:r.cM,payload:s.message}),s}}}function n(e){return async a=>{a({type:r.p7});try{const s=await l.initiateResetPassword(e);return a({type:r.fc,payload:s.data}),s.data}catch(s){throw a({type:r.cM,payload:s.message}),s}}}function o(e){return async a=>{a({type:r.p7});try{const s=await l.verifyOtpAndResetPassword(e);return a({type:r.fc,payload:s.data}),s.data}catch(s){throw a({type:r.cM,payload:s.message}),s}}}function d(e){return async a=>{a({type:r.yl});try{const s=await l.signUp(e);return a({type:r.mL,payload:s.data}),s.data}catch(s){throw a({type:r.x4,payload:s.message}),s}}}function c(e){return{type:r.dS,payload:l.validateToken(e).then((e=>e.data))}}}}]);
//# sourceMappingURL=960.73a169e9.chunk.js.map